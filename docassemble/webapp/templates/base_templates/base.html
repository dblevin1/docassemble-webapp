<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
{% if request.path == "/user/google-sign-in" and config['USE_GOOGLE_LOGIN'] %}
    <meta name="google-signin-client_id" content="{{ config['OAUTH_CREDENTIALS']['google']['id'] }}">
{% endif %}
    <title>{{ config['APP_NAME'] }}</title>
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css" rel="stylesheet">
    <link href="//cdnjs.cloudflare.com/ajax/libs/jasny-bootstrap/3.1.3/css/jasny-bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='app/app.css') }}">
  </head>
  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a href="{{ url_for('index') }}" class="navbar-brand">{{ config['BRAND_NAME'] }}</a>
	</div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav navbar-right">
            {% if not current_user.is_anonymous %}
            <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">{{ current_user.email }}<b class="caret"></b></a><ul class="dropdown-menu">
		{% if current_user.has_roles(['admin', 'developer']) %}
		<li><a href="{{ url_for('package_page') }}">{{ word('Package Management') }}</a></li>
		  {% if current_user.has_roles(['admin']) %}
		<li><a href="{{ url_for('user_list') }}">{{ word('User List') }}</a></li>
		  {% endif %}
		{% endif %}
		<li><a href="{{ url_for('user_profile_page') }}">{{ word('Profile') }}</a></li><li><a href="{{ url_for('user.logout') }}">{{ word('Sign out') }}</a></li></ul></li>
            {% elif request.path != "/login" and request.path != "/user/sign-in" %}
            <li><a href="{{ url_for('user.login', next=url_for(request.url_rule.endpoint)) }}">{{ word('Sign in') }}</a></li>
	    {% endif %}
          </ul>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="container">
        <div class="row">
	  <div class="col-sm-7 col-md-6 col-lg-5 col-centered">
	    {% block flash_messages %}
	       {%- with messages = get_flashed_messages(with_categories=true) -%}
		  {% if messages %}
		      {% for category, message in messages %}
			  {% if category=='error' %}
			      {% set category='danger' %}
			  {% endif %}
			  <div class="alert alert-{{category}}">{{ message|safe }}</div>
		      {% endfor %}
		  {% endif %}
	       {%- endwith %}
	    {% endblock %}
          </div>	
        </div>	
      </div>	
    {% block main %}{% endblock %}
    </div>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jasny-bootstrap/3.1.3/js/jasny-bootstrap.min.js"></script>
    <script>$(function () {
              $('.tabs a:last').tab('show')
            })
    </script>
</html>
